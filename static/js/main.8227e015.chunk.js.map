{"version":3,"sources":["images/logo.svg","components/header/Header.js","contexts/CurrentUserContext.js","components/card/Card.js","components/main/Main.js","images/close.svg","components/imagePopup/ImagePopup.js","components/popupWithForm/PopupWithForm.js","components/editProfilePopup/EditProfilePopup.js","components/editAvatarPopup/EditAvatarPopup.js","components/addPlacePopup/AddPlacePopup.js","components/preloader/Preloader.js","utils/api.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","className","src","logo","alt","CurrentUserContext","React","createContext","Card","props","currentUser","useContext","isOwner","owner","_id","isLiked","card","likes","some","i","onClick","e","onCardClick","target","style","backgroundImage","slice","replace","image","onCardDelete","name","onCardLike","Main","avatar","onEditAvatar","about","onEditProfile","onAddPlace","cards","map","link","length","children","ImagePopup","onClose","id","closeIcon","PopupWithForm","formName","formTitle","title","isOpen","onSubmit","EditProfilePopup","useState","setName","description","setDescription","errors","setErrors","formValid","setFormValid","nameValid","setNameValid","descriptionValid","setDescriptionValid","isLoading","setIsLoading","useEffect","validateField","fieldName","fieldValue","trim","errs","onUpdateUser","preventDefault","type","value","required","placeholder","onChange","disabled","EditAvatarPopup","setLink","buttonRef","useRef","inputRef","linkValid","setLinkValid","field","current","validity","typeMismatch","clearInput","onUpdateAvatar","ref","AddPlacePopup","linkFieldRef","Preloader","options","this","url","baseUrl","headers","authorization","contentType","fetch","method","then","res","ok","json","Promise","reject","status","catch","err","console","log","body","JSON","stringify","cardId","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","selectedCard","setSelectedCard","setCurrentUser","setCards","hasMore","setHasMore","error","setError","width","window","innerWidth","newCardsNumber","onscroll","debounce","innerHeight","document","documentElement","scrollTop","offsetHeight","loadCards","api","getInitialCards","cardsArr","Array","isArray","message","splice","getUserInfo","data","closeAllPopups","Provider","updateCard","newCard","newCards","c","removeLike","putLike","deleteCard","filter","editUserInfo","user","Error","editAvatar","addNewCard","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.8227e015.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.fad4f8a5.svg\";","import React from 'react';\r\nimport logo from \"../../images/logo.svg\";\r\n\r\nfunction Header() {\r\n    return (\r\n        <header className=\"header root__section\">\r\n            <img src={logo} alt=\"mesto logo\" className=\"logo\" />\r\n        </header>\r\n    );\r\n}\r\n\r\nexport default Header;","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();\r\n","import React from 'react';\r\nimport { CurrentUserContext } from '../../contexts/CurrentUserContext';\r\n\r\nfunction Card(props) {\r\n    const currentUser = React.useContext(CurrentUserContext);\r\n\r\n    const isOwner = props.owner._id === currentUser._id;\r\n    const isLiked = props.card.likes.some(i => i._id === currentUser._id);\r\n\r\n    const handleClick = (e) => {\r\n        props.onCardClick(e.target.style.backgroundImage.slice(4, -1).replace(/['\"]/g, \"\"));\r\n    }\r\n\r\n    const handleLikeClick = () => {\r\n        props.onCardLike(props.card);\r\n    }\r\n\r\n    const handleDeleteClick = () => {\r\n        props.onCardDelete(props.card);\r\n    }\r\n\r\n    return (\r\n        <div className=\"place-card\" onClick={handleClick}>\r\n            <div className=\"place-card\">\r\n                <div className=\"place-card__image\" style={{ backgroundImage: `url(${props.image})`}}>\r\n                    <button className={`place-card__delete-icon ${isOwner && \"place-card__delete-icon_visible\"}`} onClick={handleDeleteClick} />\r\n                </div>\r\n                <div className=\"place-card__description\">\r\n                    <h3 className=\"place-card__name\">{props.name}</h3>\r\n                    <div className=\"place-card__like-block\">\r\n                        <button className={`place-card__like-icon ${isLiked && \"place-card__like-icon_liked\"}`} onClick={handleLikeClick} />\r\n                        <p className=\"place-card__like-counter\">{props.likes}</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Card;","import React from 'react';\r\nimport Card from \"../card/Card\";\r\nimport { CurrentUserContext } from '../../contexts/CurrentUserContext';\r\n\r\nfunction Main(props) {\r\n    const currentUser = React.useContext(CurrentUserContext);\r\n\r\n    return (\r\n        <main>\r\n            <div className=\"profile root__section\">\r\n                <div className=\"user-info\">\r\n                    <div className=\"user-info__photo\" style={{ backgroundImage: `url(${currentUser.avatar})` }} onClick={props.onEditAvatar} />\r\n                    <div className=\"user-info__data\">\r\n                        <h1 className=\"user-info__name\">{currentUser.name}</h1>\r\n                        <p className=\"user-info__job\">{currentUser.about}</p>\r\n                        <button className=\"button user-info__edit-button\" onClick={props.onEditProfile}>Edit</button>\r\n                    </div>\r\n\r\n                    <button className=\"button user-info__button\" onClick={props.onAddPlace}>+</button>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"places-list root__section\">\r\n                {props.cards.map((card, i) => (\r\n                    <Card key={card._id} image={card.link} name={card.name} likes={card.likes.length} owner={card.owner}\r\n                          onCardClick={props.onCardClick} onCardLike={props.onCardLike} onCardDelete={props.onCardDelete} card={card} />\r\n                ))}\r\n            </div>\r\n\r\n            {props.children}\r\n\r\n        </main>\r\n    );\r\n}\r\n\r\nexport default Main;","export default __webpack_public_path__ + \"static/media/close.8a65f75d.svg\";","import React from 'react';\r\nimport closeIcon from \"../../images/close.svg\";\r\n\r\nfunction ImagePopup(props) {\r\n    return (\r\n        <div className={`popup ${props.card && 'popup_is-opened'}`}>\r\n            <div className=\"popup__close-field\" onClick={props.onClose} />\r\n            <div className=\"image-popup__content\" id=\"popup-content\">\r\n                <img src={closeIcon} alt=\"\" className=\"popup__close new-card__close\" onClick={props.onClose} />\r\n                <img alt=\"card\" className=\"image-popup__image\" src={props.card} />\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ImagePopup;","import React from 'react';\r\nimport closeIcon from \"../../images/close.svg\";\r\n\r\nfunction PopupWithForm(props) {\r\n    const formName = props.name;\r\n    const formTitle = props.title;\r\n    const isOpen = props.isOpen;\r\n\r\n    return (\r\n        <div className={`popup popup_type_${formName} ${isOpen && 'popup_is-opened'}`}>\r\n            <div className=\"popup__close-field\" onClick={props.onClose} />\r\n            <div className=\"popup__content\" id=\"popup-content\">\r\n                <img src={closeIcon} alt=\"\" className=\"popup__close new-card__close\" onClick={props.onClose} />\r\n                <div className=\"popup__form-container\">\r\n                    <h3 className=\"popup__title\">{formTitle}</h3>\r\n                    <form className=\"popup__form\" id=\"popup\" name={formName} onSubmit={props.onSubmit}>\r\n                        {props.children}\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default PopupWithForm;","import React from 'react';\r\nimport PopupWithForm from \"../popupWithForm/PopupWithForm\";\r\nimport { CurrentUserContext } from '../../contexts/CurrentUserContext';\r\n\r\nfunction EditProfilePopup(props) {\r\n    const currentUser = React.useContext(CurrentUserContext);\r\n    const [name, setName] = React.useState('');\r\n    const [description, setDescription] = React.useState('');\r\n    const [errors, setErrors] = React.useState({name: '', description: ''});\r\n    const [formValid, setFormValid] = React.useState(false);\r\n    const [nameValid, setNameValid] = React.useState(false);\r\n    const [descriptionValid, setDescriptionValid] = React.useState(false);\r\n    const [isLoading, setIsLoading] = React.useState(false)\r\n\r\n    React.useEffect(() => {\r\n        setName(currentUser.name || '');\r\n        setDescription(currentUser.about || '');\r\n    }, [currentUser])\r\n\r\n    React.useEffect(() => {\r\n        const validateField = (fieldName, fieldValue) => {\r\n            if(fieldValue.trim() === '') {\r\n                setErrors((errs) => ({...errs, [fieldName]: 'Это обязательное поле'}));\r\n                fieldName === 'name' ? setNameValid(false) : setDescriptionValid(false);\r\n                return false;\r\n            }\r\n            if(!(fieldValue.trim().length > 1 && fieldValue.trim().length < 30)) {\r\n                setErrors((errs) => ({...errs, [fieldName]: 'Должно быть от 2 до 30 символов'}));\r\n                fieldName === 'name' ? setNameValid(false) : setDescriptionValid(false);\r\n                return false;\r\n            }\r\n            setErrors((errs) => ({...errs, [fieldName]: ''}));\r\n            fieldName === 'name' ? setNameValid(true) : setDescriptionValid(true);\r\n            return true;\r\n        }\r\n\r\n        validateField('name', name);\r\n        validateField('description', description);\r\n    }, [name, description])\r\n\r\n    React.useEffect(() => {\r\n        const validateForm = () => {\r\n            if(nameValid && descriptionValid) {\r\n                return setFormValid(true);\r\n            }\r\n            return setFormValid(false);\r\n        }\r\n\r\n        validateForm();\r\n    }, [nameValid, descriptionValid])\r\n\r\n    const handleNameChange = (e) => {\r\n        setName(e.target.value);\r\n    }\r\n\r\n    const handleDescriptionChange = (e) => {\r\n        setDescription(e.target.value);\r\n    }\r\n\r\n    const handleClose = () => {\r\n        props.onClose();\r\n        setName(currentUser.name);\r\n        setDescription(currentUser.about);\r\n    }\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        setIsLoading(true);\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        if(name !== '' || description !== '') {\r\n            props.onUpdateUser(name, description);\r\n            setIsLoading(() => false);\r\n        }\r\n    }, [isLoading])\r\n\r\n    return (\r\n        <PopupWithForm title=\"Редактировать профиль\" name=\"user-profile\" isOpen={props.isOpen} onClose={handleClose} onSubmit={handleSubmit} >\r\n            <input type=\"text\" value={name} name=\"username\" id=\"username\" required className=\"popup__input popup__input_type_username\"\r\n                   placeholder=\"Имя\" onChange={handleNameChange} />\r\n            <span className=\"error-message\" id=\"error-username\">\r\n                {errors.name || ''}\r\n            </span>\r\n            <input type=\"text\" value={description} name=\"about\" id=\"about\" required className=\"popup__input popup__input_type_about\"\r\n                   placeholder=\"О себе\" onChange={handleDescriptionChange} />\r\n            <span className=\"error-message\" id=\"error-about\">\r\n                {errors.description || ''}\r\n            </span>\r\n            <button type=\"submit\" className={`edit-profile__button popup__button ${formValid && \"popup__button_active\"}`}\r\n                    id=\"edit-profile__button\" disabled={!formValid || isLoading} >\r\n                {isLoading ? <span>Загрузка...</span> : <span>Сохранить</span>}\r\n            </button>\r\n        </PopupWithForm>\r\n    )\r\n}\r\n\r\nexport default EditProfilePopup;","import React from 'react';\r\nimport PopupWithForm from \"../popupWithForm/PopupWithForm\";\r\n\r\nfunction EditAvatarPopup(props) {\r\n    const [link, setLink] = React.useState('');\r\n    const buttonRef = React.useRef();\r\n    const inputRef = React.useRef();\r\n    const [errors, setErrors] = React.useState({name: '', description: ''});\r\n    const [formValid, setFormValid] = React.useState(false);\r\n    const [linkValid, setLinkValid] = React.useState(false);\r\n\r\n\r\n    React.useEffect(() => {\r\n        const validateField = (fieldName, fieldValue, field) => {\r\n            if(fieldValue.trim() === '') {\r\n                setErrors((errs) => ({...errs, [fieldName]: 'Это обязательное поле'}));\r\n                setLinkValid(false);\r\n                return false;\r\n            }\r\n            if(field.validity.typeMismatch) {\r\n                setErrors((errs) => ({...errs, [fieldName]: 'Здесь должна быть ссылка'}));\r\n                setLinkValid(false);\r\n                return false;\r\n            }\r\n            setErrors((errs) => ({...errs, [fieldName]: ''}));\r\n            setLinkValid(true);\r\n            return true;\r\n        }\r\n\r\n        validateField('link', link, inputRef.current);\r\n    }, [link])\r\n\r\n    React.useEffect(() => {\r\n        const validateForm = () => {\r\n            if(linkValid) {\r\n                return setFormValid(true);\r\n            }\r\n            return setFormValid(false);\r\n        }\r\n\r\n        validateForm();\r\n    }, [linkValid])\r\n\r\n\r\n    const handleChange = () => {\r\n        setLink(inputRef.current.value);\r\n    }\r\n\r\n    const handleClose = () => {\r\n        props.onClose();\r\n        clearInput();\r\n    }\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        props.onUpdateAvatar(link);\r\n        clearInput();\r\n    }\r\n\r\n    const clearInput = () => {\r\n        setLink('');\r\n    }\r\n\r\n    return (\r\n        <PopupWithForm title=\"Изменить аватар\" name=\"avatar\" isOpen={props.isOpen} onClose={handleClose} onSubmit={handleSubmit} >\r\n            <input ref={inputRef} value={link} type=\"URL\" name=\"link\" id=\"link\" className=\"popup__input\"\r\n                   placeholder=\"Ссылка на картинку\" onChange={handleChange} />\r\n            <span className=\"error-message\" id=\"error-link\">\r\n                {errors.link || ''}\r\n            </span>\r\n            <button ref={buttonRef} type=\"submit\" className={`button popup__button ${formValid && \"popup__button_active\"}`} disabled={!formValid}>+</button>\r\n        </PopupWithForm>\r\n    )\r\n}\r\n\r\n\r\nexport default EditAvatarPopup;","import React from 'react';\r\nimport PopupWithForm from \"../popupWithForm/PopupWithForm\";\r\n\r\nfunction AddPlacePopup(props) {\r\n    const [name, setName] = React.useState('');\r\n    const [link, setLink] = React.useState('');\r\n    const buttonRef = React.useRef();\r\n    const linkFieldRef = React.useRef();\r\n    const [errors, setErrors] = React.useState({name: '', description: ''});\r\n    const [formValid, setFormValid] = React.useState(false);\r\n    const [nameValid, setNameValid] = React.useState(false);\r\n    const [linkValid, setLinkValid] = React.useState(false);\r\n\r\n\r\n    React.useEffect(() => {\r\n        const validateField = (fieldName, fieldValue, field) => {\r\n            if(fieldValue.trim() === '') {\r\n                setErrors((errs) => ({...errs, [fieldName]: 'Это обязательное поле'}));\r\n                fieldName === 'name' ? setNameValid(false) : setLinkValid(false);\r\n                return false;\r\n            }\r\n            if(fieldName === 'name' && !(fieldValue.trim().length > 1 && fieldValue.trim().length < 30)) {\r\n                setErrors((errs) => ({...errs, [fieldName]: 'Должно быть от 2 до 30 символов'}));\r\n                setNameValid(false);\r\n                return false;\r\n            }\r\n            if(fieldName === 'link' && field.validity.typeMismatch) {\r\n                setErrors((errs) => ({...errs, [fieldName]: 'Здесь должна быть ссылка'}));\r\n                setLinkValid(false);\r\n                return false;\r\n            }\r\n            setErrors((errs) => ({...errs, [fieldName]: ''}));\r\n            fieldName === 'name' ? setNameValid(true) : setLinkValid(true);\r\n            return true;\r\n        }\r\n\r\n        validateField('name', name);\r\n        validateField('link', link, linkFieldRef.current);\r\n    }, [name, link])\r\n\r\n    React.useEffect(() => {\r\n        const validateForm = () => {\r\n            if(nameValid && linkValid) {\r\n                return setFormValid(true);\r\n            }\r\n            return setFormValid(false);\r\n        }\r\n\r\n        validateForm();\r\n    }, [nameValid, linkValid])\r\n\r\n    const handleNameChange = (e) => {\r\n        setName(e.target.value);\r\n    }\r\n\r\n    const handleLinkChange = (e) => {\r\n        setLink(e.target.value);\r\n    }\r\n\r\n    const handleClose = () => {\r\n        props.onClose();\r\n        clearInput();\r\n    }\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        props.onAddPlace(name, link);\r\n        clearInput();\r\n    }\r\n\r\n    const clearInput = () => {\r\n        setName('');\r\n        setLink('');\r\n    }\r\n\r\n    return (\r\n        <PopupWithForm title=\"Новое место\" name=\"new-card\" isOpen={props.isOpen} onClose={handleClose} onSubmit={handleSubmit} >\r\n            <input value={name} type=\"text\" name=\"name\" id=\"imgname\" className=\"popup__input popup__input_type_name\"\r\n                   placeholder=\"Название\" onChange={handleNameChange} />\r\n            <span className=\"error-message\" id=\"error-imgname\">\r\n                {errors.name || ''}\r\n            </span>\r\n            <input ref={linkFieldRef} value={link} type=\"URL\" name=\"link\" id=\"link\" className=\"popup__input popup__input_type_link-url\"\r\n                   placeholder=\"Ссылка на картинку\" onChange={handleLinkChange} />\r\n            <span className=\"error-message\" id=\"error-link\">\r\n                {errors.link || ''}\r\n            </span>\r\n            <button ref={buttonRef} type=\"submit\" className={`button popup__button ${formValid && \"popup__button_active\"}`} disabled={!formValid}>+</button>\r\n        </PopupWithForm>\r\n    )\r\n}\r\n\r\nexport default AddPlacePopup;","import React from 'react';\r\n\r\nfunction Preloader(props) {\r\n    return (\r\n        <div className={`results__waiting preloader-block ${props.isOpen && 'preloader-block_opened'}`}>\r\n            <i className=\"circle-preloader preloader-block__spinner\" />\r\n            <p className=\"preloader-block__text\">Загружаем карточки...</p>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Preloader;","class Api {\r\n    constructor(options) {\r\n      this.options = options;\r\n      this.url = this.options.baseUrl;\r\n      this.headers = this.options.headers;\r\n      this.authorization = this.headers.authorization;\r\n      this.contentType = this.headers['Content-Type'];\r\n    }\r\n  \r\n    getUserInfo() {\r\n        return fetch(`${this.url}/users/me`, {\r\n            method: 'GET',\r\n            headers: {\r\n                authorization: this.authorization\r\n            }\r\n            })\r\n            .then(res => {\r\n                if (res.ok) {\r\n                    return res.json()\r\n                }\r\n                return Promise.reject(`Ошибка: ${res.status}`);\r\n            })\r\n            .catch(err => {\r\n                return err;\r\n            })\r\n    }\r\n\r\n    getInitialCards() {\r\n        return fetch(`${this.url}/cards`, {\r\n            method: 'GET',\r\n            headers: {\r\n                authorization: this.authorization\r\n            }\r\n            })\r\n            .then(res => {\r\n                if (res.ok) {\r\n                    return res.json()\r\n                }\r\n                return Promise.reject(`Ошибка: ${res.status}`);\r\n            })\r\n            .catch(err => {\r\n                console.log(err);\r\n                return err;\r\n            })\r\n    }\r\n    \r\n    editUserInfo(name, about) {\r\n        return fetch(`${this.url}/users/me`, {\r\n            method: 'PATCH',\r\n            headers: {\r\n                authorization: this.authorization,\r\n                'Content-Type': this.contentType\r\n            },\r\n            body: JSON.stringify({ name, about })\r\n        })\r\n        .then(res => {\r\n            if (res.ok) {\r\n                return res.json()\r\n            }\r\n            return Promise.reject(`Ошибка: ${res.status}`);\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n            return err;\r\n        })\r\n    }\r\n\r\n    editAvatar(avatar) {\r\n        return fetch(`${this.url}/users/me/avatar`, {\r\n            method: 'PATCH',\r\n            headers: {\r\n                authorization: this.authorization,\r\n                'Content-Type': this.contentType\r\n            },\r\n            body: JSON.stringify({ avatar })\r\n        })\r\n        .then(res => {\r\n            if (res.ok) {\r\n                return res.json()\r\n            }\r\n            return Promise.reject(`Ошибка: ${res.status}`);\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n            return err;\r\n        })\r\n    }\r\n  \r\n    addNewCard(name, link) {\r\n        return fetch(`${this.url}/cards`, {\r\n            method: 'POST',\r\n            headers: {\r\n                authorization: this.authorization,\r\n                'Content-Type': this.contentType\r\n            },\r\n            body: JSON.stringify({ name, link })\r\n        })\r\n        .then(res => {\r\n            if (res.ok) {\r\n                return res.json()\r\n            }\r\n            return Promise.reject(`Ошибка: ${res.status}`);\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n            return err;\r\n        })\r\n    }\r\n\r\n    deleteCard(cardId) {\r\n        return fetch(`${this.url}/cards/${cardId}`, {\r\n            method: 'DELETE',\r\n            headers: {\r\n                authorization: this.authorization\r\n            }\r\n        })\r\n        .then(res => {\r\n            if (res.ok) {\r\n                return res.json()\r\n            }\r\n            return Promise.reject(`Ошибка: ${res.status}`);\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n            return err;\r\n        })\r\n    }\r\n\r\n    putLike(cardId) {\r\n        return fetch(`${this.url}/cards/like/${cardId}`, {\r\n            method: 'PUT',\r\n            headers: {\r\n                authorization: this.authorization\r\n            }\r\n        })\r\n        .then(res => {\r\n            if (res.ok) {\r\n                return res.json()\r\n            }\r\n            return Promise.reject(`Ошибка: ${res.status}`);\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n            return err;\r\n        })\r\n    }\r\n\r\n    removeLike(cardId) {\r\n        return fetch(`${this.url}/cards/like/${cardId}`, {\r\n            method: 'DELETE',\r\n            headers: {\r\n                authorization: this.authorization\r\n            }\r\n        })\r\n        .then(res => {\r\n            if (res.ok) {\r\n                return res.json()\r\n            }\r\n            return Promise.reject(`Ошибка: ${res.status}`);\r\n        })\r\n        .catch(err => {\r\n            console.log(err);\r\n            return err;\r\n        })\r\n    }\r\n\r\n  }\r\n\r\nexport default new Api({\r\n    baseUrl: 'https://nomoreparties.co/cohort10',\r\n    headers: {\r\n        authorization: '5c788b82-fc9e-4eb0-ad75-9ff368bd7858',\r\n        'Content-Type': 'application/json'\r\n    }\r\n});\r\n\r\n\r\n  \r\n","import React from 'react';\r\nimport debounce from 'lodash.debounce';\r\n\r\nimport Header from \"./header/Header\";\r\nimport Main from \"./main/Main\";\r\nimport ImagePopup from \"./imagePopup/ImagePopup\";\r\nimport EditProfilePopup from \"./editProfilePopup/EditProfilePopup\";\r\nimport EditAvatarPopup from \"./editAvatarPopup/EditAvatarPopup\";\r\nimport AddPlacePopup from \"./addPlacePopup/AddPlacePopup\";\r\nimport Preloader from \"./preloader/Preloader\";\r\nimport api from '../utils/api';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\n\r\nfunction App() {\r\n    const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\r\n    const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\r\n    const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\r\n    const [selectedCard, setSelectedCard] = React.useState(null);\r\n    const [currentUser, setCurrentUser] = React.useState({});\r\n    const [cards, setCards] = React.useState([]);\r\n    const [isLoading, setIsLoading] = React.useState(false);\r\n    const [hasMore, setHasMore] = React.useState(true);\r\n    const [error, setError] = React.useState(null);\r\n    const width = window.innerWidth;\r\n    const newCardsNumber = width >= 2482 ? 14 : width >= 2182 ? 12 : width >= 1882 ? 10 : 12;\r\n\r\n    window.onscroll = debounce(() => {\r\n        if (window.innerHeight + document.documentElement.scrollTop\r\n            >= document.documentElement.offsetHeight - 1) {\r\n            if (error || isLoading || !hasMore) return;\r\n            setIsLoading(true);\r\n            loadCards();\r\n        }\r\n    }, 100);\r\n\r\n    const loadCards = () => {\r\n        api.getInitialCards()\r\n            .then(cardsArr => {\r\n                if(!Array.isArray(cardsArr)) return  Promise.reject(cardsArr.message);\r\n                setHasMore(() => cards.length < cardsArr.length);\r\n                setIsLoading(false);\r\n                setCards(cardsArr.splice(0, cards.length + newCardsNumber));\r\n            })\r\n            .catch(err => {\r\n                console.log(err);\r\n                setError(err.message);\r\n                setIsLoading(false);\r\n                return err;\r\n            })\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        api.getUserInfo()\r\n            .then(data => {\r\n                if(!data.name) return Promise.reject(data.message);\r\n                setCurrentUser(data);\r\n            })\r\n            .catch(err => {\r\n                console.log(err);\r\n                return err;\r\n            })\r\n    }, [])\r\n\r\n    React.useEffect(() => {\r\n        setIsLoading(true);\r\n        api.getInitialCards()\r\n            .then(data => {\r\n                if(!Array.isArray(data)) return  Promise.reject(data.message);\r\n                setCards(data.splice(0, newCardsNumber));\r\n                setIsLoading(false);\r\n            })\r\n            .catch(err => {\r\n                setIsLoading(false);\r\n                console.log(err);\r\n                return err;\r\n            })\r\n    }, []);\r\n\r\n    const handleEditAvatarClick = () => {\r\n        setIsEditAvatarPopupOpen(true);\r\n    }\r\n\r\n    const handleEditProfileClick = () => {\r\n        setIsEditProfilePopupOpen(true);\r\n    }\r\n\r\n    const handleAddPlaceClick = () => {\r\n        setIsAddPlacePopupOpen(true);\r\n    }\r\n\r\n    const handleCardClick = (e) => {\r\n        setSelectedCard(e);\r\n    }\r\n\r\n    const closeAllPopups = () => {\r\n        setIsEditProfilePopupOpen(false);\r\n        setIsAddPlacePopupOpen(false);\r\n        setIsEditAvatarPopupOpen(false);\r\n        setSelectedCard(null);\r\n    }\r\n\r\n    const handleCardLike = (card) => {\r\n        const isLiked = card.likes.some(i => i._id === currentUser._id);\r\n        const updateCard = (newCard) => {\r\n            const newCards = cards.map((c) => c._id === card._id ? newCard : c);\r\n            setCards(newCards);\r\n        }\r\n\r\n        if(isLiked) {\r\n            api.removeLike(card._id)\r\n                .then(newCard => {\r\n                    updateCard(newCard);\r\n                })\r\n        } else {\r\n            api.putLike(card._id)\r\n                .then(newCard => {\r\n                    updateCard(newCard);\r\n                })\r\n        }\r\n    }\r\n\r\n    const handleCardDelete = (card) => {\r\n        api.deleteCard(card._id)\r\n            .then(() => {\r\n                const newCards = cards.filter(c => c._id !== card._id);\r\n                setCards(newCards);\r\n            })\r\n    }\r\n\r\n    const handleUpdateAvatar = (link) => {\r\n        api.editAvatar(link)\r\n            .then(user => {\r\n                if(!user.name) {\r\n                    throw new Error(`${user}`);\r\n                }\r\n                setCurrentUser(user);\r\n                closeAllPopups();\r\n            })\r\n            .catch(err => {\r\n                console.log(err);\r\n                return err;\r\n            })\r\n    }\r\n\r\n    const handleUpdateUser = (name, about) => {\r\n        api.editUserInfo(name, about)\r\n            .then(user => {\r\n                if(!user.name) {\r\n                   throw new Error(`${user}`);\r\n                }\r\n                setCurrentUser(user);\r\n                closeAllPopups();\r\n            })\r\n            .catch(err => {\r\n                console.log(err);\r\n                return err;\r\n            })\r\n    }\r\n\r\n    const handleAddPlaceSubmit = (name, link) => {\r\n        api.addNewCard(name, link)\r\n            .then((newCard) => {\r\n                if(!newCard.name) {\r\n                    throw new Error(`${newCard}`);\r\n                }\r\n                setCards([...cards, newCard]);\r\n                closeAllPopups();\r\n            })\r\n            .catch(err => {\r\n                console.log(err);\r\n                return err;\r\n            })\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <CurrentUserContext.Provider value={currentUser}>\r\n                <Header />\r\n                <Main\r\n                    onEditProfile={handleEditProfileClick}\r\n                    onAddPlace={handleAddPlaceClick}\r\n                    onEditAvatar={handleEditAvatarClick}\r\n                    onCardClick={handleCardClick}\r\n                    cards={cards}\r\n                    onCardLike={handleCardLike}\r\n                    onCardDelete={handleCardDelete}\r\n                >\r\n\r\n                    <Preloader isOpen={isLoading} />\r\n\r\n                    <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={closeAllPopups} onUpdateUser={handleUpdateUser} />\r\n\r\n                    <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups} onUpdateAvatar={handleUpdateAvatar} />\r\n\r\n                    <AddPlacePopup isOpen={isAddPlacePopupOpen} onClose={closeAllPopups} onAddPlace={handleAddPlaceSubmit} />\r\n\r\n                    <ImagePopup card={selectedCard} onClose={closeAllPopups} />\r\n\r\n                </Main>\r\n            </CurrentUserContext.Provider>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}